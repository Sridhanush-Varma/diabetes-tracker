(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{1740:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/records/add",function(){return n(1767)}])},4982:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(5893),s=n(7294),l=n(4898),a=n(1491);function i(){let[e,t]=(0,s.useState)(null);(0,s.useEffect)(()=>{!async function(){try{let{data:{session:e}}=await l.OQ.auth.getSession();t((null==e?void 0:e.user)||null)}catch(e){console.error("Error getting session:",e),t(null)}}();let{data:{subscription:e}}=l.OQ.auth.onAuthStateChange((e,n)=>{t((null==n?void 0:n.user)||null)});return()=>{e.unsubscribe()}},[]);let[n,i]=(0,s.useState)((0,a.p6)(new Date)),[o,c]=(0,s.useState)("Breakfast"),[u,d]=(0,s.useState)(""),[h,x]=(0,s.useState)(""),[m,f]=(0,s.useState)(!1),[p,v]=(0,s.useState)(null),w=async t=>{if(t.preventDefault(),!e){v({text:"You must be logged in to add records",type:"error"});return}f(!0),v(null);try{let t={user_id:e.id,date:n,time_of_day:o,glucose_level:parseFloat(u),food_description:h};if(await (0,l.fC)(t))v({text:"Record added successfully!",type:"success"}),d(""),x("");else throw Error("Failed to add record")}catch(e){v({text:e.message||"An error occurred while adding the record",type:"error"})}finally{f(!1)}};return(0,r.jsxs)("form",{onSubmit:w,className:"space-y-5",children:[p&&(0,r.jsx)("div",{className:"p-4 rounded-lg ".concat("error"===p.type?"bg-red-50 text-red-700 border border-red-100":"bg-green-50 text-green-700 border border-green-100"),children:(0,r.jsxs)("div",{className:"flex items-center",children:["error"===p.type?(0,r.jsx)("svg",{className:"w-5 h-5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}):(0,r.jsx)("svg",{className:"w-5 h-5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,r.jsx)("span",{children:p.text})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"date",className:"form-label",children:"Date"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsx)("input",{id:"date",type:"date",value:n,onChange:e=>i(e.target.value),className:"input-field pl-10",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"timeOfDay",className:"form-label",children:"Time of Day"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("select",{id:"timeOfDay",value:o,onChange:e=>c(e.target.value),className:"input-field pl-10 appearance-none",required:!0,children:[(0,r.jsx)("option",{value:"Breakfast",children:"Breakfast"}),(0,r.jsx)("option",{value:"Lunch",children:"Lunch"}),(0,r.jsx)("option",{value:"Dinner",children:"Dinner"})]}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,r.jsx)("svg",{className:"h-4 w-4 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"glucoseLevel",className:"form-label",children:"Glucose Level (mg/dL)"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,r.jsx)("input",{id:"glucoseLevel",type:"number",value:u,onChange:e=>d(e.target.value),className:"input-field pl-10",min:"0",step:"0.1",placeholder:"Enter your glucose reading",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"foodDescription",className:"form-label",children:"Food Description"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute top-3 left-3 flex items-start pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,r.jsx)("textarea",{id:"foodDescription",value:h,onChange:e=>x(e.target.value),className:"input-field pl-10 min-h-[100px]",placeholder:"Describe what you ate...",required:!0})]})]}),(0,r.jsx)("button",{type:"submit",className:"btn-primary w-full py-3 mt-2",disabled:m,children:m?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Save Record"]})})]})}},1767:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(5893),s=n(7294),l=n(1050),a=n(4982),i=n(1163),o=n(4898);function c(){let[e,t]=(0,s.useState)(void 0),n=(0,i.useRouter)();return((0,s.useEffect)(()=>{(async function(){try{let{data:{session:e}}=await o.OQ.auth.getSession();t((null==e?void 0:e.user)||null)}catch(e){console.error("Error getting session:",e),t(null)}})();let{data:{subscription:e}}=o.OQ.auth.onAuthStateChange((e,n)=>{t((null==n?void 0:n.user)||null)});return()=>{e.unsubscribe()}},[]),(0,s.useEffect)(()=>{null===e&&n.push("/auth")},[e,n]),null==e)?(0,r.jsx)(l.Z,{title:"Loading...",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Loading..."})})}):(0,r.jsx)(l.Z,{title:"Add Record",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Add New Glucose Reading"}),(0,r.jsx)(a.Z,{})]})})}},1491:function(e,t,n){"use strict";n.d(t,{L5:function(){return m},NE:function(){return v},cS:function(){return w},p6:function(){return d},ps:function(){return x},ss:function(){return p},sy:function(){return f},up:function(){return h}});var r=n(6989),s=n(4500),l=n(8825),a=n(258),i=n(154),o=n(8078),c=n(1999),u=n(8352);function d(e){let t="string"==typeof e?new Date(e):e;return(0,r.Z)(t,"yyyy-MM-dd")}function h(e){let t="string"==typeof e?new Date(e):e;return(0,r.Z)(t,"MMMM d, yyyy")}function x(){let e=new Date;return{start:(0,s.Z)(e),end:(0,l.Z)(e)}}function m(){let e=new Date;return{start:(0,a.Z)(e),end:(0,i.Z)(e)}}function f(){let e=new Date;return{start:(0,o.Z)(e),end:(0,c.Z)(e)}}function p(e){return e.reduce((e,t)=>{let n=d(t.date);return e[n]||(e[n]=[]),e[n].push(t),e},{})}function v(e){return e.reduce((e,t)=>{let n=(0,u.Z)(t.date),r=d((0,s.Z)(n)),a=d((0,l.Z)(n)),i="".concat(r," to ").concat(a);return e[i]||(e[i]=[]),e[i].push(t),e},{})}function w(e){return e.reduce((e,t)=>{let n=(0,u.Z)(t.date),s=(0,r.Z)(n,"MMMM yyyy");return e[s]||(e[s]=[]),e[s].push(t),e},{})}}},function(e){e.O(0,[208,309,50,888,774,179],function(){return e(e.s=1740)}),_N_E=e.O()}]);